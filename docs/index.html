<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PTCG Pocket Meta</title>
  <style>
    body { font-family: system-ui, -apple-system, "Noto Sans TC", sans-serif; margin: 24px; }
    table { border-collapse: collapse; width: 100%; margin: 12px 0 28px; }
    th, td { border: 1px solid #ddd; padding: 8px; font-size: 14px; }
    th { background: #f6f6f6; text-align: left; }
    .small { color: #666; font-size: 12px; }
  </style>
</head>
<body>
  <h1>PTCG Pocket Meta</h1>
  <p class="small">資料來源：Limitless Tournament Platform API（每日更新）</p>

  <h2>Tier List</h2>
  <table id="tier"><thead>
    <tr><th>Deck</th><th>Score</th><th>Usage</th><th>Top cut</th><th>Samples</th></tr>
  </thead><tbody></tbody></table>

  <h2>Players Ranking</h2>
  <table id="players"><thead>
    <tr><th>#</th><th>Player</th><th>Points</th></tr>
  </thead><tbody></tbody></table>

<script>
async function loadJson(path){ return (await fetch(path)).json(); }

function pct(x){ return (x*100).toFixed(1) + "%"; }

(async () => {
  const tier = await loadJson("/ptcgp-tier-site/data/tier.json");
  const players = await loadJson("/ptcgp-tier-site/data/players.json");

  const tierBody = document.querySelector("#tier tbody");
  tier.slice(0, 50).forEach(row => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${row.deck}</td>
      <td>${row.score.toFixed(4)}</td>
      <td>${pct(row.usage)}</td>
      <td>${pct(row.topcut_rate)}</td>
      <td>${row.samples}</td>
    `;
    tierBody.appendChild(tr);
  });

  const pBody = document.querySelector("#players tbody");
  players.slice(0, 100).forEach((row, i) => {
    const tr = document.createElement("tr");
    tr.innerHTML = `<td>${i+1}</td><td>${row.player}</td><td>${row.points.toFixed(4)}</td>`;
    pBody.appendChild(tr);
  });
})();
</script>
</body>
</html>